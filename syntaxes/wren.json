{
    "name": "Wren",
    "scopeName": "source.wren",
    "fileTypes": [ "wren" ],

    "patterns": [
        { "include": "#code" },
        { "include": "#modifiers" },
        { "include": "#class" }
    ],
    "repository": {
        "comment": {
            "name": "comment.line",
            "match": "//.*"
        },
        "blockComment": {
            "name": "comment.block",
            "begin": "/\\*",
            "end": "\\*/",
            "patterns": [ { "include": "#blockComment" } ]
        },
        "keyword": {
            "patterns": [
                {
                    "name": "keyword.control",
                    "match": "\\b(?:break|else|for|if|import|in|new|return|while|var)\\b"
                },
                {
                    "name": "keyword.operator",
                    "match": "\\b(is)\\b"
                },
                {
                    "name": "keyword.operator.logical",
                    "match": "!|&&|\\|\\|"
                },
                {
                    "name": "keyword.operator.range",
                    "match": "(\\.\\.\\.?)"
                },
                {
                    "name": "keyword.operator.arithmetic",
                    "match": "(\\-|\\+|\\*|\/|%)"
                },
                {
                    "name": "keyword.operator.comparison",
                    "match": "(==|!=|<=|>=|<|>)"
                },
                {
                    "name": "keyword.operator.assignment",
                    "match": "(=)"
                }
            ]
        },
        "constant": {
            "patterns": [
                {
                    "name": "constant.language",
                    "match": "\\b(true|false|null)\\b"
                },
                {
                    "name": "constant.numeric",
                    "match": "\\b(0x[0-9a-fA-F]*|[0-9]+(\\.?[0-9]*)?(e(\\+|-)?[0-9]+)?)\\b"
                },
                {
                    "name": "constant.numeric.hexadecimal",
                    "match": "0x[A-Fa-f0-9]+"
                }
            ]
        },
        "modifiers": {
            "name": "storage.modifier",
            "match": "\\b(?:foreign|static)\\b"
        },
        "variable": {
            "patterns": [
                {
                    "name": "variable.language",
                    "match": "\\b(this|super)\\b"
                },
                {
                    "name": "variable.other.class",
                    "match": "\\b__\\w*"
                },
                {
                    "name": "variable.other.instance",
                    "match": "\\b_\\w*"
                }
            ]
        },
        "string": {
            "name": "string.quoted.double",
            "begin": "\"",
            "end": "\"",
            "patterns": [
                { "include": "#stringEscapes" }
            ]
        },
        "stringEscapes": {
            "patterns": [
                {
                    "name": "constant.character.escape",
                    "match": "\\\\(?:[0\"\\abfnrtv]|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{4})"
                },
                {
                    "name": "invalid.illegal.unknown-escape",
                    "match": "\\\\(?:x[0-9A-Fa-f]{0,1}|u[0-9A-Fa-f]{0,3}|U[0-9A-Fa-f]{0,7}|.)"
                },
                {
                    "name": "constant.character.interpolation",
                    "match": "%\\((.*?)\\)"
                }
            ]
        },
        "code": {
            "patterns": [
                { "include": "#blockComment" },
                { "include": "#comment" },
                { "include": "#keyword" },
                { "include": "#constant" },
                { "include": "#variable" },
                { "include": "#string" }
            ]
        },
        "class": {
            "name": "meta.class",
            "begin": "(\\b(foreign)\\s+)?(\\bclass)\\s+(\\w+)",
            "beginCaptures": {
                "2": { "name": "storage.modifier" },
                "3": { "name": "storage.modifier" },
                "4": { "name": "entity.name.class" }
            },
            "end": "(?=})",
            "patterns": [
                {
                    "name": "meta.class.body",
                    "begin": "{",
                    "patterns": [
                        { "include": "#code" }
                    ],
                    "end": "(?=})"
                }
            ]
        }
    },
    "uuid": "fa761344-7fe1-4602-bfe3-7846848b7417"
}